// https://github.com/yaph/traste v0.3.0 Copyright 2021 undefined
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("@tonaljs/tonal")):"function"==typeof define&&define.amd?define(["exports","d3-selection","@tonaljs/tonal"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).traste={},t.d3,t.Tonal)}(this,(function(t,e,n){"use strict";let r=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],a=["#8dd3c7","#cae9be","#ffffb3","#bebada","#e49ea5","#fb8072","#cc9ba2","#80b1d3","#fdb462","#dbca65","#b3de69","#a5d89a"];function l(t,e,a=[]){let l=(t+e)%r.length,s=r[l];if(!a||a.includes(s))return s;for(let t of a)if(s==n.Note.enharmonic(t))return t}function s(t){return a[o(t)]}function o(t){if(r.includes(t))return r.indexOf(t);const e=n.Note.enharmonic(t);return r.includes(e)?r.indexOf(e):void 0}function i(t,e,n,r,a="#cccccc",l=null,s=null,o=null){const i=t.append("svg:circle").attr("cx",e).attr("cy",n).attr("r",r).style("fill",a);l&&i.style("stroke",l),s&&i.style("stroke-width",s),o&&i.attr("title",o)}t.drawFretboard=function(t,n,r,a=null){const f=n.tuning,c=n.string_gauges,d=n.fret_count,u=e.select(t);if(u.selectAll("*").remove(),null===a){a=.95*u.node().parentElement.getBoundingClientRect().width}const g=26*(d+1),p=(a=Math.max(g,a))/(d+1),y=.65*p,h=.1*y,b=.01*p,m=.8*p,x=.5*y,k=y*f.length+x,_=a-1.2*m,v=y*(f.length-1),w=.06*p,A=.23*p,C=.1*A,E=1.05*A,j=.3*A;u.attr("width",a).attr("height",k);const G=`translate(${m}, ${x})`,B=u.append("g").attr("class","frets").attr("transform",G),D=u.append("g").attr("class","fret-markers").attr("transform",G),F=u.append("g").attr("class","strings").attr("transform",G),O=u.append("g").attr("class","notes").attr("transform",G);for(let t=0;t<=d;t++){let e=t*p,n=w;0==t&&(n*=1.5),B.append("svg:line").attr("x1",e).attr("y1",-h/2).attr("x2",e).attr("y2",v+h).style("stroke","#222222").style("stroke-width",n).append("title").text(t)}for(let t of n.fret_markers){if(t>d)break;let e=t*p-p/2,n=k-x-3*j;if(0==t%12){const t=1.3*j;i(D,e+t,n,j),e-=t}i(D,e,n,j)}for(let t=0;t<f.length;t++){const e=f[t],n=t*y;F.append("svg:line").attr("x1",-b/2).attr("y1",n).attr("x2",_+b).attr("y2",n).style("stroke","#444444").style("stroke-width",c[t]*y).append("title").text(e)}for(let t=0;t<f.length;t++){const e=o(f[t]);for(let n=0;n<=d;n++){const a=l(e,n,r);if(!a)continue;const o=a.replace(/b/g,"♭").replace(/#/g,"♯"),f=E-5*(1-1/o.length),c=n*p-.5*p,d=t*y;i(O,c,d,A,s(a),"#999999",C,a),O.append("svg:text").attr("x",c).attr("y",d).attr("dy","0.38em").attr("fill","#000000").style("text-anchor","middle").style("font-size",`${f}px`).style("font-family","Roboto,Ubuntu,Helvetica,Arial,sans-serif").text(o)}}},t.instruments={guitar:{tuning:["E","B","G","D","A","E"],string_gauges:[.01,.013,.017,.026,.036,.046],fret_count:15,fret_markers:[3,5,7,9,12,15,17,19,21,24]},ukulele:{tuning:["A","E","C","G"],string_gauges:[.024,.031,.037,.026],fret_count:12,fret_markers:[5,7,10,12,15,17,19]}},t.noteColor=s,Object.defineProperty(t,"__esModule",{value:!0})}));
