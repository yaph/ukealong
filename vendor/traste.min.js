// https://github.com/yaph/traste v0.2.0 Copyright 2021 undefined
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-selection"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).traste={},t.d3)}(this,(function(t,e){"use strict";let r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n={A:["G##","Bbb"],"A#":["Bb"],Ab:["G#"],B:["Cb","A##"],"B#":["C"],Bb:["A#"],C:["B#","Dbb"],"C#":["Db"],D:["C##","Ebb"],"D#":["Eb"],Db:["C#"],E:["Fb","D##"],"E#":["F"],Eb:["D#"],F:["E#","Gbb"],"F#":["Gb"],G:["F##","Abb"],"G#":["Ab"],Gb:["F#"]},l=["#fb8072","#fccde5","#fdb462","#ffed6f","#ffffb3","#b3de69","#ccebc5","#80b1d3","#bc80bd","#8dd3c7","#bebada","#d9d9d9"];function a(t,e,l=[]){let a=(t+e)%r.length,s=r[a];if(!l||l.includes(s))return s;for(let t of n[s])if(l.includes(t))return t}function s(t){if(r.includes(t))return r.indexOf(t);for(let e of n[t])if(r.includes(e))return r.indexOf(e)}function f(t,e,r,n,l="#cccccc",a=null,s=null,f=null){let i=t.append("svg:circle").attr("cx",e).attr("cy",r).attr("r",n).style("fill",l);a&&i.style("stroke",a),s&&i.style("stroke-width",s),f&&i.attr("title",f)}t.drawFretboard=function(t,r,n){let l=r.tuning,i=r.string_gauges,o=r.fret_count,c=e.select(t);c.selectAll("*").remove();let d=.95*c.node().parentElement.getBoundingClientRect().width,u=26*(o+1),b=140*(o+1);d=Math.min(b,Math.max(u,d));let g=d/(o+1),p=.65*g,h=.1*p,y=.01*g,x=.8*g,m=.5*p,k=p*l.length+m,A=d-1.2*x,C=p*(l.length-1),E=.06*g,G=.22*g,_=.2*G,D=1.05*G,B=.3*G;c.attr("width",d).attr("height",k);let F=`translate(${x}, ${m})`,w=c.append("g").attr("class","frets").attr("transform",F),v=c.append("g").attr("class","fret-markers").attr("transform",F),M=c.append("g").attr("class","strings").attr("transform",F),O=c.append("g").attr("class","notes").attr("transform",F);for(let t=0;t<=o;t++){let e=t*g,r=E;0==t&&(r*=1.5),w.append("svg:line").attr("x1",e).attr("y1",-h/2).attr("x2",e).attr("y2",C+h).style("stroke","#222222").style("stroke-width",r).append("title").text(t)}for(let t of r.fret_markers){if(t>o)break;let e=t*g-g/2,r=k-m-3*B;if(0==t%12){let t=1.3*B;f(v,e+t,r,B),e-=t}f(v,e,r,B)}for(let t=0;t<l.length;t++){let e=l[t],r=t*p;M.append("svg:line").attr("x1",-y/2).attr("y1",r).attr("x2",A+y).attr("y2",r).style("stroke","#444444").style("stroke-width",i[t]*p).append("title").text(e)}for(let t=0;t<l.length;t++){let e=s(l[t]);for(let r=0;r<=o;r++){let l=a(e,r,n);if(!l)continue;let s=r*g-.5*g,i=t*p,o=s-.34*D,c=i+.34*D;l.length>1&&(o=s-.5*D),f(O,s,i,G,"#ffffff","#aaaaaa",_,l),O.append("svg:text").attr("x",o).attr("y",c).attr("fill","#000000").style("font-size",`${D}px`).text(l.replace(/b/g,"♭").replace(/#/g,"♯"))}}},t.instruments={guitar:{tuning:["E","B","G","D","A","E"],string_gauges:[.01,.013,.017,.026,.036,.046],fret_count:15,fret_markers:[3,5,7,9,12,15,17,19,21,24]},ukulele:{tuning:["A","E","C","G"],string_gauges:[.024,.031,.037,.026],fret_count:12,fret_markers:[5,7,10,12,15,17,19]}},t.noteColors=function(t){switch(t.length){case 3:return[l[0],l[4],l[7]];case 4:return[l[0],l[4],l[7],l[11]];case 5:return[l[0],l[4],l[7],l[11],l[2]];case 7:return[l[0],l[2],l[4],l[5],l[7],l[9],l[11]];default:return l.slice(0,t.length)}},Object.defineProperty(t,"__esModule",{value:!0})}));
