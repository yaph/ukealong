// https://github.com/yaph/traste v0.3.0 Copyright 2021 undefined
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("@tonaljs/tonal")):"function"==typeof define&&define.amd?define(["exports","d3-selection","@tonaljs/tonal"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).traste={},t.d3,t.Tonal)}(this,(function(t,e,n){"use strict";let r=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],a=["#8dd3c7","#cae9be","#ffffb3","#bebada","#e49ea5","#fb8072","#cc9ba2","#80b1d3","#fdb462","#dbca65","#b3de69","#a5d89a"];function s(t,e,a=[]){let s=(t+e)%r.length,l=r[s];if(!a||a.includes(l))return l;for(let t of a)if(l==n.Note.enharmonic(t))return t}function l(t){if(r.includes(t))return r.indexOf(t);const e=n.Note.enharmonic(t);return r.includes(e)?r.indexOf(e):void 0}function o(t,e,n,r,a="#cccccc",s=null,l=null,o=null){const i=t.append("svg:circle").attr("cx",e).attr("cy",n).attr("r",r).style("fill",a);s&&i.style("stroke",s),l&&i.style("stroke-width",l),o&&i.attr("title",o)}t.drawFretboard=function(t,n,r){const a=n.tuning,i=n.string_gauges,f=n.fret_count,c=e.select(t);c.selectAll("*").remove();let d=.95*c.node().parentElement.getBoundingClientRect().width;const u=26*(f+1),g=140*(f+1);d=Math.min(g,Math.max(u,d));const p=d/(f+1),h=.65*p,y=.1*h,m=.01*p,x=.8*p,b=.5*h,k=h*a.length+b,_=d-1.2*x,v=h*(a.length-1),w=.06*p,A=.23*p,C=.1*A,E=1.05*A,j=.3*A;c.attr("width",d).attr("height",k);const G=`translate(${x}, ${b})`,B=c.append("g").attr("class","frets").attr("transform",G),D=c.append("g").attr("class","fret-markers").attr("transform",G),F=c.append("g").attr("class","strings").attr("transform",G),M=c.append("g").attr("class","notes").attr("transform",G);for(let t=0;t<=f;t++){let e=t*p,n=w;0==t&&(n*=1.5),B.append("svg:line").attr("x1",e).attr("y1",-y/2).attr("x2",e).attr("y2",v+y).style("stroke","#222222").style("stroke-width",n).append("title").text(t)}for(let t of n.fret_markers){if(t>f)break;let e=t*p-p/2,n=k-b-3*j;if(0==t%12){const t=1.3*j;o(D,e+t,n,j),e-=t}o(D,e,n,j)}for(let t=0;t<a.length;t++){const e=a[t],n=t*h;F.append("svg:line").attr("x1",-m/2).attr("y1",n).attr("x2",_+m).attr("y2",n).style("stroke","#444444").style("stroke-width",i[t]*h).append("title").text(e)}for(let t=0;t<a.length;t++){const e=l(a[t]);for(let n=0;n<=f;n++){const a=s(e,n,r);if(!a)continue;const l=a.replace(/b/g,"♭").replace(/#/g,"♯"),i=E-5*(1-1/l.length),f=n*p-.5*p,c=t*h;o(M,f,c,A,"#ffffff","#999999",C,a),M.append("svg:text").attr("x",f).attr("y",c).attr("dy","0.33em").attr("fill","#000000").style("text-anchor","middle").style("font-size",`${i}px`).text(l)}}},t.instruments={guitar:{tuning:["E","B","G","D","A","E"],string_gauges:[.01,.013,.017,.026,.036,.046],fret_count:15,fret_markers:[3,5,7,9,12,15,17,19,21,24]},ukulele:{tuning:["A","E","C","G"],string_gauges:[.024,.031,.037,.026],fret_count:12,fret_markers:[5,7,10,12,15,17,19]}},t.noteColors=function(t){let e=[];for(let n of t)e.push(a[l(n)]);return e},Object.defineProperty(t,"__esModule",{value:!0})}));
