// https://github.com/yaph/traste v0.3.0 Copyright 2021 undefined
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("@tonaljs/tonal")):"function"==typeof define&&define.amd?define(["exports","d3-selection","@tonaljs/tonal"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).traste={},t.d3,t.Tonal)}(this,(function(t,e,n){"use strict";let r=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],a=["#8dd3c7","#cae9be","#ffffb3","#bebada","#e49ea5","#fb8072","#cc9ba2","#80b1d3","#fdb462","#dbca65","#b3de69","#a5d89a"];function s(t,e,a=[]){let s=(t+e)%r.length,l=r[s];if(!a||a.includes(l))return l;for(let t of a)if(l==n.Note.enharmonic(t))return t}function l(t){return a[o(t)]}function o(t){if(r.includes(t))return r.indexOf(t);const e=n.Note.enharmonic(t);return r.includes(e)?r.indexOf(e):void 0}function i(t,e,n,r,a="#cccccc",s=null,l=null,o=null){const i=t.append("svg:circle").attr("cx",e).attr("cy",n).attr("r",r).style("fill",a);s&&i.style("stroke",s),l&&i.style("stroke-width",l),o&&i.attr("title",o)}t.drawFretboard=function(t,n,r){const a=n.tuning,c=n.string_gauges,f=n.fret_count,d=e.select(t);d.selectAll("*").remove();let u=.95*d.node().parentElement.getBoundingClientRect().width;const g=26*(f+1),p=140*(f+1);u=Math.min(p,Math.max(g,u));const y=u/(f+1),h=.65*y,m=.1*h,b=.01*y,x=.8*y,k=.5*h,_=h*a.length+k,v=u-1.2*x,w=h*(a.length-1),A=.06*y,C=.23*y,E=.1*C,j=1.05*C,G=.3*C;d.attr("width",u).attr("height",_);const B=`translate(${x}, ${k})`,D=d.append("g").attr("class","frets").attr("transform",B),F=d.append("g").attr("class","fret-markers").attr("transform",B),M=d.append("g").attr("class","strings").attr("transform",B),O=d.append("g").attr("class","notes").attr("transform",B);for(let t=0;t<=f;t++){let e=t*y,n=A;0==t&&(n*=1.5),D.append("svg:line").attr("x1",e).attr("y1",-m/2).attr("x2",e).attr("y2",w+m).style("stroke","#222222").style("stroke-width",n).append("title").text(t)}for(let t of n.fret_markers){if(t>f)break;let e=t*y-y/2,n=_-k-3*G;if(0==t%12){const t=1.3*G;i(F,e+t,n,G),e-=t}i(F,e,n,G)}for(let t=0;t<a.length;t++){const e=a[t],n=t*h;M.append("svg:line").attr("x1",-b/2).attr("y1",n).attr("x2",v+b).attr("y2",n).style("stroke","#444444").style("stroke-width",c[t]*h).append("title").text(e)}for(let t=0;t<a.length;t++){const e=o(a[t]);for(let n=0;n<=f;n++){const a=s(e,n,r);if(!a)continue;const o=a.replace(/b/g,"♭").replace(/#/g,"♯"),c=j-5*(1-1/o.length),f=n*y-.5*y,d=t*h;i(O,f,d,C,l(a),"#999999",E,a),O.append("svg:text").attr("x",f).attr("y",d).attr("dy","0.38em").attr("fill","#000000").style("text-anchor","middle").style("font-size",`${c}px`).style("font-family","Roboto,Ubuntu,Helvetica,Arial,sans-serif").text(o)}}},t.instruments={guitar:{tuning:["E","B","G","D","A","E"],string_gauges:[.01,.013,.017,.026,.036,.046],fret_count:15,fret_markers:[3,5,7,9,12,15,17,19,21,24]},ukulele:{tuning:["A","E","C","G"],string_gauges:[.024,.031,.037,.026],fret_count:12,fret_markers:[5,7,10,12,15,17,19]}},t.noteColor=l,Object.defineProperty(t,"__esModule",{value:!0})}));
