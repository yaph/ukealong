(()=>{var V=(t,n)=>Array(Math.abs(n)+1).join(t);function l(t,n,o){return function(...e){return console.warn(`${t} is deprecated. Use ${n}.`),o.apply(this,e)}}function R(t){return t!==null&&typeof t=="object"&&typeof t.name=="string"}function O(t){return t!==null&&typeof t=="object"&&typeof t.step=="number"&&typeof t.alt=="number"}var bt=[0,2,4,-1,1,3,5],gt=bt.map(t=>Math.floor(t*7/12));function At(t){let{step:n,alt:o,oct:e,dir:r=1}=t,a=bt[n]+7*o;if(e===void 0)return[r*a];let s=e-gt[n]-4*o;return[r*a,r*s]}var Zt=[3,0,4,1,5,2,6];function jt(t){let[n,o,e]=t,r=Zt[Jt(n)],a=Math.floor((n+1)/7);if(o===void 0)return{step:r,alt:a,dir:e};let s=o+4*a+gt[r];return{step:r,alt:a,oct:s,dir:e}}function Jt(t){let n=(t+1)%7;return n<0?7+n:n}var xt={empty:!0,name:"",pc:"",acc:""},vt=new Map,Wt=t=>"CDEFGAB".charAt(t),k=t=>t<0?V("b",-t):V("#",t),F=t=>t[0]==="b"?-t.length:t.length;function i(t){let n=vt.get(t);if(n)return n;let o=typeof t=="string"?tn(t):O(t)?i(nn(t)):R(t)?i(t.name):xt;return vt.set(t,o),o}var en=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Y(t){let n=en.exec(t);return[n[1].toUpperCase(),n[2].replace(/x/g,"##"),n[3],n[4]]}function q(t){return i(jt(t))}var on=(t,n)=>(t%n+n)%n,Z=[0,2,4,5,7,9,11];function tn(t){let n=Y(t);if(n[0]===""||n[3]!=="")return xt;let o=n[0],e=n[1],r=n[2],a=(o.charCodeAt(0)+3)%7,s=F(e),m=r.length?+r:void 0,c=At({step:a,alt:s,oct:m}),h=o+e+r,p=o+e,b=(Z[a]+s+120)%12,d=m===void 0?on(Z[a]+s,12)-12*99:Z[a]+s+12*(m+1),x=d>=0&&d<=127?d:null,C=m===void 0?null:Math.pow(2,(d-69)/12)*440;return{empty:!1,acc:e,alt:s,chroma:b,coord:c,freq:C,height:d,letter:o,midi:x,name:h,oct:m,pc:p,step:a}}function nn(t){let{step:n,alt:o,oct:e}=t,r=Wt(n);if(!r)return"";let a=r+k(o);return e||e===0?a+e:a}var J={empty:!0,name:"",acc:""},rn="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",an="(AA|A|P|M|m|d|dd)([-+]?\\d+)",sn=new RegExp("^"+rn+"|"+an+"$");function mn(t){let n=sn.exec(`${t}`);return n===null?["",""]:n[1]?[n[1],n[2]]:[n[4],n[3]]}var It={};function P(t){return typeof t=="string"?It[t]||(It[t]=cn(t)):O(t)?P(ln(t)):R(t)?P(t.name):J}var Nt=[0,2,4,5,7,9,11],St="PMMPPMM";function cn(t){let n=mn(t);if(n[0]==="")return J;let o=+n[0],e=n[1],r=(Math.abs(o)-1)%7,a=St[r];if(a==="M"&&e==="P")return J;let s=a==="M"?"majorable":"perfectable",m=""+o+e,c=o<0?-1:1,h=o===8||o===-8?o:c*(r+1),p=un(s,e),b=Math.floor((Math.abs(o)-1)/7),d=c*(Nt[r]+p+12*b),x=(c*(Nt[r]+p)%12+12)%12,C=At({step:r,alt:p,oct:b,dir:c});return{empty:!1,name:m,num:o,q:e,step:r,alt:p,dir:c,type:s,simple:h,semitones:d,chroma:x,coord:C,oct:b}}function W(t){let[n,o=0]=t,e=n*7+o*12<0,r=e?[-n,-o,-1]:[n,o,1];return P(jt(r))}function un(t,n){return n==="M"&&t==="majorable"||n==="P"&&t==="perfectable"?0:n==="m"&&t==="majorable"?-1:/^A+$/.test(n)?n.length:/^d+$/.test(n)?-1*(t==="perfectable"?n.length:n.length+1):0}function ln(t){let{step:n,alt:o,oct:e=0,dir:r}=t;if(!r)return"";let a=n+1+7*e,s=r<0?"-":"",m=St[n]==="M"?"majorable":"perfectable",c=s+a+dn(m,o);return c}function dn(t,n){return n===0?t==="majorable"?"M":"P":n===-1&&t==="majorable"?"m":n>0?V("A",n):V("d",t==="perfectable"?n:n+1)}function f(t,n){let o=i(t),e=P(n);if(o.empty||e.empty)return"";let r=o.coord,a=e.coord,s=r.length===1?[r[0]+a[0]]:[r[0]+a[0],r[1]+a[1]];return q(s).name}function S(t,n){let o=i(t),e=i(n);if(o.empty||e.empty)return"";let r=o.coord,a=e.coord,s=a[0]-r[0],m=r.length===2&&a.length===2?a[1]-r[1]:-Math.floor(s*7/12);return W([s,m]).name}function fn(t,n){let o=[];for(;n--;o[n]=n+t);return o}function Pn(t,n){let o=[];for(;n--;o[n]=t-n);return o}function G(t,n){return t<n?fn(t,n-t+1):Pn(t,t-n+1)}function T(t,n){let o=n.length,e=(t%o+o)%o;return n.slice(e,o).concat(n.slice(0,e))}function tt(t){return t.filter(n=>n===0||n)}var g={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},nt=t=>Number(t).toString(2),Tt=t=>parseInt(t,2),Mn=/^[01]{12}$/;function Et(t){return Mn.test(t)}var hn=t=>typeof t=="number"&&t>=0&&t<=4095,yn=t=>t&&Et(t.chroma),Ct={[g.chroma]:g};function u(t){let n=Et(t)?t:hn(t)?nt(t):Array.isArray(t)?gn(t):yn(t)?t.chroma:g.chroma;return Ct[n]=Ct[n]||bn(n)}var An=l("Pcset.pcset","Pcset.get",u),jn=t=>u(t).chroma,xn=t=>u(t).intervals,vn=t=>u(t).setNum,In=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function et(t){let n=[];for(let o=0;o<12;o++)t.charAt(o)==="1"&&n.push(In[o]);return n}function Nn(){return G(2048,4095).map(nt)}function _(t,n=!0){let o=u(t),e=o.chroma.split("");return tt(e.map((r,a)=>{let s=T(a,e);return n&&s[0]==="0"?null:s.join("")}))}function Sn(t,n){return u(t).setNum===u(n).setNum}function z(t){let n=u(t).setNum;return o=>{let e=u(o).setNum;return n&&n!==e&&(e&n)===e}}function $(t){let n=u(t).setNum;return o=>{let e=u(o).setNum;return n&&n!==e&&(e|n)===e}}function $t(t){let n=u(t);return o=>{let e=i(o);return n&&!e.empty&&n.chroma.charAt(e.chroma)==="1"}}function Tn(t){let n=$t(t);return o=>o.filter(n)}var En={get:u,chroma:jn,num:vn,intervals:xn,chromas:Nn,isSupersetOf:$,isSubsetOf:z,isNoteIncludedIn:$t,isEqual:Sn,filter:Tn,modes:_,pcset:An};function Cn(t){let n=t.split("");return n.map((o,e)=>T(e,n).join(""))}function bn(t){let n=Tt(t),o=Cn(t).map(Tt).filter(a=>a>=2048).sort()[0],e=nt(o),r=et(t);return{empty:!1,name:"",setNum:n,chroma:t,normalized:e,intervals:r}}function gn(t){if(t.length===0)return g.chroma;let n,o=[0,0,0,0,0,0,0,0,0,0,0,0];for(let e=0;e<t.length;e++)n=i(t[e]),n.empty&&(n=P(t[e])),n.empty||(o[n.chroma]=1);return o.join("")}var ot=En,$n=[["1P 3M 5P","major","M ^ "],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Dn={...g,name:"",quality:"Unknown",intervals:[],aliases:[]},E=[],v={};function L(t){return v[t]||Dn}var wn=l("ChordType.chordType","ChordType.get",L);function Vn(){return E.map(t=>t.name).filter(t=>t)}function Rn(){return E.map(t=>t.aliases[0]).filter(t=>t)}function On(){return Object.keys(v)}function A(){return E.slice()}var kn=l("ChordType.entries","ChordType.all",A);function Fn(){E=[],v={}}function Dt(t,n,o){let e=Gn(t),r={...u(t),name:o||"",quality:e,intervals:t,aliases:n};E.push(r),r.name&&(v[r.name]=r),v[r.setNum]=r,v[r.chroma]=r,r.aliases.forEach(a=>qn(r,a))}function qn(t,n){v[n]=t}function Gn(t){let n=o=>t.indexOf(o)!==-1;return n("5A")?"Augmented":n("3M")?"Major":n("5d")?"Diminished":n("3m")?"Minor":"Unknown"}$n.forEach(([t,n,o])=>Dt(t.split(" "),o.split(" "),n));E.sort((t,n)=>t.setNum-n.setNum);var _n={names:Vn,symbols:Rn,get:L,all:A,add:Dt,removeAll:Fn,keys:On,entries:kn,chordType:wn},rt=_n,zn=t=>{let n=t.reduce((o,e)=>{let r=i(e).chroma;return r!==void 0&&(o[r]=o[r]||i(e).name),o},{});return o=>n[o]};function at(t){let n=t.map(e=>i(e).pc).filter(e=>e);if(i.length===0)return[];let o=Ln(n,1);return o.filter(e=>e.weight).sort((e,r)=>r.weight-e.weight).map(e=>e.name)}function Ln(t,n){let o=t[0],e=i(o).chroma,r=zn(t),a=_(t,!1),s=[];return a.forEach((m,c)=>{let h=A().filter(p=>p.chroma===m);h.forEach(p=>{let b=p.aliases[0],d=r(c),x=c!==e;x?s.push({weight:.5*n,name:`${d}${b}/${o}`}):s.push({weight:1*n,name:`${d}${b}`})})}),s}var Un=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 3m 4d 5d 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","\xB7superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 5d 5P 6M 7m","romanian minor"],["1P 2M 3m 4A 5P 6M 7m","dorian #4"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Hn={...g,intervals:[],aliases:[]},U=[],I={};function st(){return U.map(t=>t.name)}function H(t){return I[t]||Hn}var Bn=l("ScaleDictionary.scaleType","ScaleType.get",H);function D(){return U.slice()}var Kn=l("ScaleDictionary.entries","ScaleType.all",D);function Xn(){return Object.keys(I)}function Qn(){U=[],I={}}function wt(t,n,o=[]){let e={...u(t),name:n,intervals:t,aliases:o};return U.push(e),I[e.name]=e,I[e.setNum]=e,I[e.chroma]=e,e.aliases.forEach(r=>Yn(e,r)),e}function Yn(t,n){I[n]=t}Un.forEach(([t,n,...o])=>wt(t.split(" "),n,o));var Zn={names:st,get:H,all:D,add:wt,removeAll:Qn,keys:Xn,entries:Kn,scaleType:Bn},mt=Zn,it={empty:!0,name:"",symbol:"",root:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]},Jn=/^(6|64|7|9|11|13)$/;function B(t){let[n,o,e,r]=Y(t);return n===""?["",t]:n==="A"&&r==="ug"?["","aug"]:!r&&(e==="4"||e==="5")?[n+o,e]:Jn.test(e)?[n+o,e+r]:[n+o+e,r]}function w(t){if(t==="")return it;if(Array.isArray(t)&&t.length===2)return K(t[1],t[0]);{let[n,o]=B(t),e=K(o,n);return e.empty?K(t):e}}function K(t,n,o){let e=L(t),r=i(n||""),a=i(o||"");if(e.empty||n&&r.empty||o&&a.empty)return it;let s=S(r.pc,a.pc),m=e.intervals.indexOf(s)+1;if(!a.empty&&!m)return it;let c=Array.from(e.intervals);for(let d=1;d<m;d++){let x=c[0][0],C=c[0][1],Qt=parseInt(x,10)+7;c.push(`${Qt}${C}`),c.shift()}let h=r.empty?[]:c.map(d=>f(r,d));t=e.aliases.indexOf(t)!==-1?t:e.aliases[0];let p=`${r.empty?"":r.pc}${t}${a.empty||m<=1?"":"/"+a.pc}`,b=`${n?r.pc+" ":""}${e.name}${m>1&&o?" over "+a.pc:""}`;return{...e,name:b,symbol:p,type:e.name,root:a.name,intervals:c,rootDegree:m,tonic:r.name,notes:h}}var Wn=l("Chord.chord","Chord.get",w);function te(t,n){let[o,e]=B(t);return o?f(o,n)+e:t}function ne(t){let n=w(t),o=$(n.chroma);return D().filter(e=>o(e.chroma)).map(e=>e.name)}function ee(t){let n=w(t),o=$(n.chroma);return A().filter(e=>o(e.chroma)).map(e=>n.tonic+e.aliases[0])}function oe(t){let n=w(t),o=z(n.chroma);return A().filter(e=>o(e.chroma)).map(e=>n.tonic+e.aliases[0])}var re={getChord:K,get:w,detect:at,chordScales:ne,extended:ee,reduced:oe,tokenize:B,transpose:te,chord:Wn},ct=re;var ae=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],se=[];ae.forEach(([t,n,o])=>me(t,n,o));function me(t,n,o){se.push({empty:!1,dots:"",name:"",value:1/t,fraction:t<1?[1/t,1]:[1,t],shorthand:n,names:o})}var yo=P,bo="P m M m M P d P m M m M".split(" "),go=S,Ao=Vt((t,n)=>[t[0]+n[0],t[1]+n[1]]),jo=Vt((t,n)=>[t[0]-n[0],t[1]-n[1]]);function Vt(t){return(n,o)=>{let e=P(n).coord,r=P(o).coord;if(e&&r){let a=t(e,r);return W(a).name}}}var ie=Math.log(2),ce=Math.log(440);function lt(t){let n=12*(Math.log(t)-ce)/ie+69;return Math.round(n*100)/100}var le="C C# D D# E F F# G G# A A# B".split(" "),ue="C Db D Eb E F Gb G Ab A Bb B".split(" ");function j(t,n={}){if(isNaN(t)||t===-Infinity||t===Infinity)return"";t=Math.round(t);let o=n.sharps===!0?le:ue,e=o[t%12];if(n.pitchClass)return e;let r=Math.floor(t/12)-1;return e+r}var de=["C","D","E","F","G","A","B"],Rt=t=>t.name,Ot=t=>t.map(i).filter(n=>!n.empty);function pe(t){return t===void 0?de.slice():Array.isArray(t)?Ot(t).map(Rt):[]}var M=i,fe=t=>M(t).name,Pe=t=>M(t).pc,Me=t=>M(t).acc,he=t=>M(t).oct,ye=t=>M(t).midi,be=t=>M(t).freq,ge=t=>M(t).chroma;function Ae(t){return j(t)}function je(t){return j(lt(t))}function xe(t){return j(lt(t),{sharps:!0})}function ve(t){return j(t,{sharps:!0})}var ut=f,Ie=f,kt=t=>n=>ut(n,t),Ne=kt,Ft=t=>n=>ut(t,n),Se=Ft;function dt(t,n){let o=M(t);if(o.empty)return"";let[e,r]=o.coord,a=r===void 0?q([e+n]):q([e+n,r]);return a.name}var Te=dt,pt=(t,n)=>t.height-n.height,Ee=(t,n)=>n.height-t.height;function qt(t,n){return n=n||pt,Ot(t).sort(n).map(Rt)}function Gt(t){return qt(t,pt).filter((n,o,e)=>o===0||n!==e[o-1])}var Ce=t=>{let n=M(t);return n.empty?"":j(n.midi||n.chroma,{sharps:n.alt>0,pitchClass:n.midi===null})};function $e(t,n){let o=M(t);if(o.empty)return"";let e=M(n||j(o.midi||o.chroma,{sharps:o.alt<0,pitchClass:!0}));if(e.empty||e.chroma!==o.chroma)return"";if(o.oct===void 0)return e.pc;let r=o.chroma-o.alt,a=e.chroma-e.alt,s=r>11||a<0?-1:r<0||a>11?1:0,m=o.oct+s;return e.pc+m}var De={names:pe,get:M,name:fe,pitchClass:Pe,accidentals:Me,octave:he,midi:ye,ascending:pt,descending:Ee,sortedNames:qt,sortedUniqNames:Gt,fromMidi:Ae,fromMidiSharps:ve,freq:be,fromFreq:je,fromFreqSharps:xe,chroma:ge,transpose:ut,tr:Ie,transposeBy:kt,trBy:Ne,transposeFrom:Ft,trFrom:Se,transposeFifths:dt,trFifths:Te,simplify:Ce,enharmonic:$e},ft=De,_t={empty:!0,name:"",chordType:""},zt={};function N(t){return typeof t=="string"?zt[t]||(zt[t]=Ve(t)):typeof t=="number"?N(Pt[t]||""):O(t)?we(t):R(t)?N(t.name):_t}var Co=l("RomanNumeral.romanNumeral","RomanNumeral.get",N);function we(t){return N(k(t.alt)+Pt[t.step])}var Re=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function Oe(t){return Re.exec(t)||["","","",""]}var Lt="I II III IV V VI VII",Pt=Lt.split(" "),$o=Lt.toLowerCase().split(" ");function Ve(t){let[n,o,e,r]=Oe(t);if(!e)return _t;let a=e.toUpperCase(),s=Pt.indexOf(a),m=F(o),c=1;return{empty:!1,name:n,roman:e,interval:P({step:s,alt:m,dir:c}).name,acc:o,chordType:r,alt:m,step:s,major:e===a,oct:0,dir:c}}var y=Object.freeze([]),Ut={type:"major",tonic:"",alteration:0,keySignature:""},X={tonic:"",grades:y,intervals:y,scale:y,chords:y,chordsHarmonicFunction:y,chordScales:y},Oo={...Ut,...X,type:"major",minorRelative:"",scale:y,secondaryDominants:y,secondaryDominantsMinorRelative:y,substituteDominants:y,substituteDominantsMinorRelative:y},ko={...Ut,type:"minor",relativeMajor:"",natural:X,harmonic:X,melodic:X},Ht=(t,n,o="")=>n.map((e,r)=>`${t[r]}${o}${e}`);function Q(t,n,o,e){return r=>{let a=t.map(m=>N(m).interval||""),s=a.map(m=>f(r,m));return{tonic:r,grades:t,intervals:a,scale:s,chords:Ht(s,n),chordsHarmonicFunction:o.slice(),chordScales:Ht(s,e," ")}}}var Fo=Q("I II III IV V VI VII".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),qo=Q("I II bIII IV V bVI bVII".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),Go=Q("I II bIII IV V bVI VII".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),_o=Q("I II bIII IV V VI VII".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));var Mt=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Bt={...g,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Kt=Mt.map(ke),ht={};Kt.forEach(t=>{ht[t.name]=t,t.aliases.forEach(n=>{ht[n]=t})});function yt(t){return typeof t=="string"?ht[t.toLowerCase()]||Bt:t&&t.name?yt(t.name):Bt}var Qo=l("Mode.mode","Mode.get",yt);function Fe(){return Kt.slice()}var Yo=l("Mode.mode","Mode.all",Fe);function ke(t){let[n,o,e,r,a,s,m]=t,c=m?[m]:[],h=Number(o).toString(2),p=et(h);return{empty:!1,intervals:p,modeNum:n,chroma:h,normalized:h,name:r,setNum:o,alt:e,triad:a,seventh:s,aliases:c}}function Xt(t){return(n,o)=>{let e=yt(n);if(e.empty)return[];let r=T(e.modeNum,t),a=e.intervals.map(s=>f(o,s));return r.map((s,m)=>a[m]+s)}}var Zo=Xt(Mt.map(t=>t[4])),Jo=Xt(Mt.map(t=>t[5]));var qe={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Ge(t){if(typeof t!="string")return["",""];let n=t.indexOf(" "),o=i(t.substring(0,n));if(o.empty){let r=i(t);return r.empty?["",t]:[r.name,""]}let e=t.substring(o.name.length+1);return[o.name,e.length?e:""]}var fr=st;function _e(t){let n=Array.isArray(t)?t:Ge(t),o=i(n[0]).name,e=H(n[1]);if(e.empty)return qe;let r=e.name,a=o?e.intervals.map(m=>f(o,m)):[],s=o?o+" "+r:r;return{...e,name:s,type:r,tonic:o,notes:a}}var Pr=l("Scale.scale","Scale.get",_e);var hr=new Map;var Jr=ot,Wr=rt,ta=mt,ze=ct.get("Gm"),Le=ft.get("A4");console.log(ze,Le.midi);})();
