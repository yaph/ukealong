"use strict";function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _arrayWithHoles(r){if(Array.isArray(r))return r}var major_roots=["C","G","D","A","E","B","Gb","Db","Ab","Eb","Bb","F"];var minor_roots=["A","E","B","F#","C#","G#","Eb","Bb","F","C","G","D"];var arc_len=2*(Math.PI/major_roots.length);var arc_start=0.98;var arc_end=0.44;var radians=Math.PI/180;var svg=d3.select("#circle-of-fifths");var outer_radius=svg.node().parentElement.getBoundingClientRect().width/2.1;svg.attr("width",outer_radius*2).attr("height",outer_radius*2);var circle_radii=[arc_start,0.68,arc_end];var tick_start=-outer_radius*arc_start;var tick_length=outer_radius*0.54;var major_label_radius=outer_radius*0.83;var minor_label_radius=outer_radius*0.56;var major_label_size=outer_radius*0.14;var minor_label_size=outer_radius*0.075;var arc=d3.arc().innerRadius(outer_radius*arc_end).outerRadius(outer_radius*arc_start).startAngle(function(d,i){return d*arc_len-arc_len/2}).endAngle(function(d,i){return d*arc_len+arc_len/2});var range=d3.range(0,major_roots.length);var tick_scale=d3.scaleLinear().range([0,330]).domain([0,11]);var main_group=svg.append("g").attr("id","main-group").attr("transform","translate(".concat(outer_radius,", ").concat(outer_radius,")"));main_group.append("g").selectAll(".circle").data(circle_radii).enter().append("circle").attr("class","circle").attr("x",0).attr("y",0).attr("r",function(d){return outer_radius*d});main_group.append("g").selectAll(".major-label").data(range).enter().append("text").attr("class","major-label pointer").attr("text-anchor","middle").attr("data-name",function(d){return"".concat(major_roots[d],"-major")}).attr("x",function(d){return major_label_radius*Math.sin(tick_scale(d)*radians)}).attr("y",function(d){return-major_label_radius*Math.cos(tick_scale(d)*radians)+major_label_size/2}).style("font-size","".concat(major_label_size,"px")).text(function(d){return major_roots[d]}).on("click",highlight);main_group.append("g").selectAll(".minor-label").data(range).enter().append("text").attr("class","minor-label pointer").attr("text-anchor","middle").attr("data-name",function(d){return"".concat(minor_roots[d],"-natural_minor")}).attr("x",function(d){return minor_label_radius*Math.sin(tick_scale(d)*radians)}).attr("y",function(d){return-minor_label_radius*Math.cos(tick_scale(d)*radians)+minor_label_size/2}).style("font-size","".concat(minor_label_size,"px")).text(function(d){return"".concat(minor_roots[d],"m")}).on("click",highlight);main_group.append("g").selectAll(".ticks").data(d3.range(0,12)).enter().append("line").attr("class","tick").attr("x1",0).attr("x2",0).attr("y1",tick_start).attr("y2",tick_start+tick_length).attr("transform",function(d){return"rotate(".concat(tick_scale(d)+360/24,")")});d3.select("[data-name=\"C-major\"]").dispatch("click");function setKey(key_name){var _getKeyAndNotes=getKeyAndNotes(key_name),_getKeyAndNotes2=_slicedToArray(_getKeyAndNotes,2),key=_getKeyAndNotes2[0],notes=_getKeyAndNotes2[1];if(key&&notes){traste.drawFretboard("#fretboard",traste.instruments.ukulele,notes);var h1=d3.select("#key-name");h1.text("Key of ".concat(key_name));var info=d3.select("#key-info");info.html("");var table=info.append("table");tr(table,"",key.grades,"th");tr(table,"Notes",notes);tr(table,"Chords",key.chords)}}function highlight(event,index){setKey(event.target.textContent);main_group.selectAll(".highlight").remove();var g=main_group.insert("g",":first-child").attr("class","highlight");g.selectAll("path").data([index-1,index,index+1]).enter().append("path").attr("d",arc).style("fill","rgba(0, 0, 0, 0.1)")}